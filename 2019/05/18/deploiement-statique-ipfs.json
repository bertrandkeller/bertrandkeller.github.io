{ "id": "/2019/05/18/deploiement-statique-ipfs", "title": "Déploiement de votre premier site web statique sur IPFS", "url": "https://bertrandkeller.info/2019/05/18/deploiement-statique-ipfs/", "date": 1558130400, "html": "<p>Traduction de l’article <a href=\"https://medium.com/interplanetary-gatsby/the-complete-beginners-guide-to-deploying-your-first-static-website-to-ipfs-103b27e8822e\">The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS</a>.</p>\n\n<p>Pour cet article ? Parce que le web est centralisé à travers de grandes plateformes ; que cette centralisation permet de contrôler les flux, des contrôler les gens et de les taxer. Le web consiste à permettre le libre échange citoyen.</p>\n\n<p>Vous n’avez besoin de rien savoir sur IPFS ou sur le « web distribué », pas même les générateurs de sites statiques. La première étape consiste à ouvrir votre terminal et à taper ceci dans:</p>\n\n<p>```bash\nmkdir -p dwebsite/public\ncd dwebsite\necho ‘&lt;h1&gt;Hello, worlds!&lt;/h1&gt;’ » public/index.html</p>\n\n<p>yarn global add @agentofuser/ipfs-deploy\nipd\n```</p>\n\n<p>Maintenant, asseyez-vous et observez les logs.</p>\n\n<p><code>bash\nℹ 🤔 No path argument specified. Looking for common ones... \n✔ 📂 Found local public directory. Deploying that. \n✔ 🚚 public weighs 24 B. \n✔ 📌 It’s pinned to Infura now with hash: \nℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY \n✔ 📋 Copied HTTP gateway URL to clipboard: \nℹ 🔗 https://ipfs.infura.io/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY \n✔ 🏄 Opened web browser (call with -O to disable.)\n</code></p>\n\n<p>Et voilà. Votre propre l33t <a href=\"https://twitter.com/search?q=%23dweb\">#dwebsite</a> (The Decentralized Web) en ligne sur le réseau <a href=\"https://cloudflare-ipfs.com/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY\">Merkleverse</a>.</p>\n\n<h2 id=\"quest-ce-qui-vient-de-se-passer\">Qu’est-ce qui vient de se passer?</h2>\n\n<p>Pas évident à comprendre en une fois. Revenons un peu en arrière et regardons-le au ralenti, avec quelques commentaires :</p>\n\n<h3 id=\"o-a-se-passe-\">1. Où ça se passe ?</h3>\n\n<p>À vrai dire, j’aurais pu appeler <code>ipd ./public</code>, en passant le répertoire à déployer (public) explicitement.</p>\n\n<p>Mais alors, vous ne verriez pas l’emoji 🤔 comme une sonde ipfs-deploy pour l’une des nombreuses destinations, souvent non documentées, de <a href=\"https://github.com/agentofuser/ipfs-deploy/blob/8023d82b5df68076ca79bc684f45ea64e5e67c06/index.js#L75\">construction habituellement utilisées par les générateurs de sites statiques</a>.</p>\n\n<p><code>bash\nℹ 🤔 No path argument specified. Looking for common ones... \n✔ 📂 Found local public directory. Deploying that.\n</code></p>\n\n<p>Oui, j’ai en fait passé au peigne fin le site <a href=\"https://staticgen.com\">staticgen.com</a>, installé plusieurs de ces générateurs de sites statiques et créé de petits sites de test afin de pouvoir appliquer ce titre “zéro configuration”.</p>\n\n<p>C’est ce que recherche <em>ipfs-deploy</em> vous éviter de le taper :</p>\n\n<p><code>bash\nconst guesses = [\n '_site', // jekyll, hakyll, eleventy\n 'site', // forgot which\n 'public', // gatsby, hugo\n 'dist', // nuxt\n 'output', // pelican\n 'out', // hexo\n 'build', // metalsmith, middleman\n 'website/build', // docusaurus\n 'docs', // many others\n]\n</code></p>\n\n<p>Comme vous pouvez le voir avec le nom de cette publication, je suis un fan de Gatsby, mais <em>ipfs-deploy</em> sert tous ceux qui en ont besoin. Apportez votre propre SSG (Générateur de site statique), nous lâcherons un jetpack interplanétaire sur notre dos et le ferons voler. 🚀</p>\n\n<h3 id=\"le-tlchargement\">2. Le téléchargement</h3>\n\n<p>C’est la raison pour laquelle nous sommes ici, c’est-à-dire placer le site web dans l’espace (au figuré, pour le moment). Donc, quelques secondes plus tard, <em>ipfs-deploy</em> fournit:</p>\n\n<p><code>bash\n✔ 📌 It’s pinned to Infura now with hash:\nℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY\n</code></p>\n\n<p>Victoire !</p>\n\n<p>Cette petite génération/diffusion d’un <a href=\"https://multiformats.io/multihash/\">hash</a> est le nœud de tout le judo #dweb (The Decentralized Web). La formule magique qui appelle votre site Web depuis les profondeurs caverneuses des donjons connectés, sans se soucier de savoir où il se trouve, mais seulement de savoir de quoi il retourne.</p>\n\n<p><strong>Un adressage intrinsèque, non lié par la localisation ou la route.</strong></p>\n\n<p>Bienvenue <attitude grave=\"\"> dans le futur distribué.</attitude></p>\n\n<h2 id=\"attendez-une-minute-je-pensais-vous-avoir-entendu-dire-distribu\">Attendez une minute, je pensais vous avoir entendu dire “distribué”</h2>\n\n<p>Oh, lecteur perspicace.</p>\n\n<p>Vous avez raison : si IPFS est censé être un protocole poste à poste (pair à pair), pourquoi télécharge-t-on tout de même l’ensemble du site, n’est-ce pas ? Pour un serveur !?</p>\n\n<p>Ne devrions-nous pas simplement annoncer au réseau que nous avons le hachage et ensuite attendre de le servir nous-mêmes à d’autres pairs à la demande ?</p>\n\n<p>Oui, vous pouvez faire ça. Ensuite, vous fermez votre ordinateur portable, le wifi diminue, 💩 arrive, et pouf ✨, votre site web disparaît.</p>\n\n<p>Cela ressemble aux torrents : il faut au moins un semeur (personne qui possède une copie complète du fichier partagé sur le réseau torrent.) pour que le contenu soit accessible. Si votre site web compte des tonnes de personnes qui exécutent leur propre nœud IPFS et le ré-servent à d’autres, votre temps de disponibilité sera en moyenne assez élevé.</p>\n\n<p>Mais il n’y a pas encore beaucoup de visiteurs de ce type (espérons-le, <a href=\"https://brave.com/\">Brave</a> réglera ce problème pour nous) et, en plus, c’est un tout nouveau site web !</p>\n\n<p>Ce serait une autre histoire si les navigateurs avaient un <a href=\"https://twitter.com/search?q=%23asyncUX\">#asyncUX</a> décent et que les visiteurs pouvaient facilement leur dire de mettre le téléchargement en file d’attente lorsqu’un homologue est disponible, puis de l’avertir lorsqu’il était prêt (comme un flux continu « à lire plus tard »).</p>\n\n<p>Mais dans l’état actuel des choses, s’il n’y a personne pour servir votre contenu au moment où une demande est faite, la situation est en suspend. Vous n’êtes donc pas <a href=\"https://interplanetarygatsby.com/foreword/\">prêt pour l’espace</a>.</p>\n\n<p>Nous avons donc besoin d’un semoir à haute disponibilité de notre côté. Ou, dans le jargon IPFS, un « pinner » (éplinglage garantissant que les objets sont conservés dans le stockage local du noeud).</p>\n\n<h2 id=\"zero-config-pinning-avec-infuraio\">Zero-Config Pinning avec Infura.io</h2>\n\n<p>L’objectif principal de <em>ipfs-deploy</em> est de vous permettre de vivre une première expérience heureuse consistant à voir quelque chose que vous avez créé sur IPFS le plus rapidement possible.</p>\n\n<p>Une façon de le faire consiste à exécuter un démon IPFS local et rendre disponible le contenu vous-même.</p>\n\n<p>Mais comme nous l’avons vu plus haut, ce serait un peu ridicule car cela ne représente pas ce à quoi un déploiement réel que vous pouvez partager avec vos amis pourrait ressembler. Je dois avoir un pinner stable.</p>\n\n<p>Bien épingler avec un temps de disponibilité décent coûte de l’argent, alors la plupart des services d’épinglage exigent naturellement que vous vous inscriviez au moins à un niveau gratuit avant d’accepter d’héberger votre site web.</p>\n\n<p>Pas <a href=\"https://infura.io/docs/ipfs/get/block_get.md\">Infura.io</a> !</p>\n\n<p>Par magie de la limitation prudente des taux, de la prévention intelligente des abus, du capital de croissance ou de l’abandon téméraire, ils vous permettent de télécharger des éléments à l’abri, <a href=\"https://community.infura.io/t/how-often-do-you-garbage-collect-files-on-your-ipfs-node-and-how-long-will-a-file-persist-after-upload/44/2\">sans authentification</a>, et ils vous le serviront indéfiniment. (Même contre votre volonté semble-t-il, car il n’y a pas de moyen clair de détacher les choses pour le moment.)</p>\n\n<p>Nous devons donc cette possibilité à leur simple générosité : merci à Infura, et continuez comme ça !</p>\n\n<p>De plus, si vous possédez vous-même un service d’épinglage et que vous souhaitez faire partie du paquet de bienvenue de zéro-configuration, envisagez d’ajouter un niveau « encore plus libre » qui ne nécessite pas d’inscription.</p>\n\n<p>Les sites web statiques nouvellement créés ne prennent pas beaucoup de place, ont très peu de trafic et constituent une excellente passerelle pour une consommation accrue d’IPFS.</p>\n\n<p>Vous n’avez pas seulement déployé votre premier site web IPFS, mais vous pouvez maintenant vous vanter de bien comprendre son fonctionnement en agitant les mains et en disant « Oh, c’est un peu comme git + bittorrent »</p>\n\n<p>Alors, <a href=\"https://github.com/agentofuser/ipfs-deploy/issues/new\">dites-moi ce qui ne va pas</a> et je vais régler le problème pour vous.</p>\n", "markdown": "Traduction de l’article [The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS](https://medium.com/interplanetary-gatsby/the-complete-beginners-guide-to-deploying-your-first-static-website-to-ipfs-103b27e8822e).\n\nPour cet article ? Parce que le web est centralisé à travers de grandes plateformes ; que cette centralisation permet de contrôler les flux, des contrôler les gens et de les taxer. Le web consiste à permettre le libre échange citoyen.\n\nVous n'avez besoin de rien savoir sur IPFS ou sur le « web distribué », pas même les générateurs de sites statiques. La première étape consiste à ouvrir votre terminal et à taper ceci dans:\n\n```bash\nmkdir -p dwebsite/public\ncd dwebsite\necho '<h1>Hello, worlds!</h1>' >> public/index.html\n\nyarn global add @agentofuser/ipfs-deploy\nipd\n```\n\nMaintenant, asseyez-vous et observez les logs.\n\n```bash\nℹ 🤔 No path argument specified. Looking for common ones... \n✔ 📂 Found local public directory. Deploying that. \n✔ 🚚 public weighs 24 B. \n✔ 📌 It’s pinned to Infura now with hash: \nℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY \n✔ 📋 Copied HTTP gateway URL to clipboard: \nℹ 🔗 https://ipfs.infura.io/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY \n✔ 🏄 Opened web browser (call with -O to disable.)\n```\n\nEt voilà. Votre propre l33t [#dwebsite](https://twitter.com/search?q=%23dweb) (The Decentralized Web) en ligne sur le réseau [Merkleverse](https://cloudflare-ipfs.com/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY).\n\n\n## Qu'est-ce qui vient de se passer?\n\nPas évident à comprendre en une fois. Revenons un peu en arrière et regardons-le au ralenti, avec quelques commentaires :\n\n### 1. Où ça se passe ?\n\nÀ vrai dire, j’aurais pu appeler `ipd ./public`, en passant le répertoire à déployer (public) explicitement.\n\nMais alors, vous ne verriez pas l’emoji 🤔 comme une sonde ipfs-deploy pour l’une des nombreuses destinations, souvent non documentées, de [construction habituellement utilisées par les générateurs de sites statiques](https://github.com/agentofuser/ipfs-deploy/blob/8023d82b5df68076ca79bc684f45ea64e5e67c06/index.js#L75).\n\n\n```bash\nℹ 🤔 No path argument specified. Looking for common ones... \n✔ 📂 Found local public directory. Deploying that.\n```\n\nOui, j'ai en fait passé au peigne fin le site [staticgen.com](https://staticgen.com), installé plusieurs de ces générateurs de sites statiques et créé de petits sites de test afin de pouvoir appliquer ce titre \"zéro configuration\".\n\nC'est ce que recherche *ipfs-deploy* vous éviter de le taper :\n\n```bash\nconst guesses = [\n '_site', // jekyll, hakyll, eleventy\n 'site', // forgot which\n 'public', // gatsby, hugo\n 'dist', // nuxt\n 'output', // pelican\n 'out', // hexo\n 'build', // metalsmith, middleman\n 'website/build', // docusaurus\n 'docs', // many others\n]\n```\n\nComme vous pouvez le voir avec le nom de cette publication, je suis un fan de Gatsby, mais *ipfs-deploy* sert tous ceux qui en ont besoin. Apportez votre propre SSG (Générateur de site statique), nous lâcherons un jetpack interplanétaire sur notre dos et le ferons voler. 🚀\n\n### 2. Le téléchargement\n\nC’est la raison pour laquelle nous sommes ici, c’est-à-dire placer le site web dans l’espace (au figuré, pour le moment). Donc, quelques secondes plus tard, *ipfs-deploy* fournit:\n\n```bash\n✔ 📌 It’s pinned to Infura now with hash:\nℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY\n```\n\nVictoire !\n\nCette petite génération/diffusion d’un [hash](https://multiformats.io/multihash/) est le nœud de tout le judo #dweb (The Decentralized Web). La formule magique qui appelle votre site Web depuis les profondeurs caverneuses des donjons connectés, sans se soucier de savoir où il se trouve, mais seulement de savoir de quoi il retourne.\n\n**Un adressage intrinsèque, non lié par la localisation ou la route.**\n\nBienvenue <attitude grave> dans le futur distribué.\n\n## Attendez une minute, je pensais vous avoir entendu dire “distribué”\n\nOh, lecteur perspicace.\n\nVous avez raison : si IPFS est censé être un protocole poste à poste (pair à pair), pourquoi télécharge-t-on tout de même l’ensemble du site, n'est-ce pas ? Pour un serveur !?\n\nNe devrions-nous pas simplement annoncer au réseau que nous avons le hachage et ensuite attendre de le servir nous-mêmes à d'autres pairs à la demande ?\n\nOui, vous pouvez faire ça. Ensuite, vous fermez votre ordinateur portable, le wifi diminue, 💩 arrive, et pouf ✨, votre site web disparaît.\n\nCela ressemble aux torrents : il faut au moins un semeur (personne qui possède une copie complète du fichier partagé sur le réseau torrent.) pour que le contenu soit accessible. Si votre site web compte des tonnes de personnes qui exécutent leur propre nœud IPFS et le ré-servent à d’autres, votre temps de disponibilité sera en moyenne assez élevé.\n\nMais il n’y a pas encore beaucoup de visiteurs de ce type (espérons-le, [Brave](https://brave.com/) réglera ce problème pour nous) et, en plus, c’est un tout nouveau site web !\n\nCe serait une autre histoire si les navigateurs avaient un [#asyncUX](https://twitter.com/search?q=%23asyncUX) décent et que les visiteurs pouvaient facilement leur dire de mettre le téléchargement en file d’attente lorsqu’un homologue est disponible, puis de l'avertir lorsqu’il était prêt (comme un flux continu « à lire plus tard »).\n\nMais dans l’état actuel des choses, s’il n’y a personne pour servir votre contenu au moment où une demande est faite, la situation est en suspend. Vous n’êtes donc pas [prêt pour l'espace](https://interplanetarygatsby.com/foreword/).\n\nNous avons donc besoin d’un semoir à haute disponibilité de notre côté. Ou, dans le jargon IPFS, un « pinner » (éplinglage garantissant que les objets sont conservés dans le stockage local du noeud).\n\n## Zero-Config Pinning avec Infura.io\n\nL’objectif principal de *ipfs-deploy* est de vous permettre de vivre une première expérience heureuse consistant à voir quelque chose que vous avez créé sur IPFS le plus rapidement possible.\n\nUne façon de le faire consiste à exécuter un démon IPFS local et rendre disponible le contenu vous-même.\n\nMais comme nous l’avons vu plus haut, ce serait un peu ridicule car cela ne représente pas ce à quoi un déploiement réel que vous pouvez partager avec vos amis pourrait ressembler. Je dois avoir un pinner stable.\n\nBien épingler avec un temps de disponibilité décent coûte de l’argent, alors la plupart des services d’épinglage exigent naturellement que vous vous inscriviez au moins à un niveau gratuit avant d’accepter d’héberger votre site web.\n\nPas [Infura.io](https://infura.io/docs/ipfs/get/block_get.md) !\n\nPar magie de la limitation prudente des taux, de la prévention intelligente des abus, du capital de croissance ou de l’abandon téméraire, ils vous permettent de télécharger des éléments à l’abri, [sans authentification](https://community.infura.io/t/how-often-do-you-garbage-collect-files-on-your-ipfs-node-and-how-long-will-a-file-persist-after-upload/44/2), et ils vous le serviront indéfiniment. (Même contre votre volonté semble-t-il, car il n'y a pas de moyen clair de détacher les choses pour le moment.)\n\nNous devons donc cette possibilité à leur simple générosité : merci à Infura, et continuez comme ça !\n\nDe plus, si vous possédez vous-même un service d'épinglage et que vous souhaitez faire partie du paquet de bienvenue de zéro-configuration, envisagez d'ajouter un niveau « encore plus libre » qui ne nécessite pas d'inscription.\n\nLes sites web statiques nouvellement créés ne prennent pas beaucoup de place, ont très peu de trafic et constituent une excellente passerelle pour une consommation accrue d’IPFS.\n\nVous n’avez pas seulement déployé votre premier site web IPFS, mais vous pouvez maintenant vous vanter de bien comprendre son fonctionnement en agitant les mains et en disant « Oh, c’est un peu comme git + bittorrent »\n\nAlors, [dites-moi ce qui ne va pas](https://github.com/agentofuser/ipfs-deploy/issues/new) et je vais régler le problème pour vous.\n" }