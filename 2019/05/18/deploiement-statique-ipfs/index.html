<!DOCTYPE html> <html lang="fr"> <head> <meta charset="utf-8"> <link href="https://gmpg.org/xfn/11" rel="profile"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <title>Déploiement de votre premier site web statique sur IPFS | Bertrand Keller</title> <meta name="generator" content="Jekyll v3.9.0"/> <meta property="og:title" content="Déploiement de votre premier site web statique sur IPFS"/> <meta name="author" content="Bertrand Keller"/> <meta property="og:locale" content="fr"/> <meta name="description" content="Traduction de l’article The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS."/> <meta property="og:description" content="Traduction de l’article The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS."/> <link rel="canonical" href="https://bertrandkeller.info/2019/05/18/deploiement-statique-ipfs/"/> <meta property="og:url" content="https://bertrandkeller.info/2019/05/18/deploiement-statique-ipfs/"/> <meta property="og:site_name" content="✊ Bertrand Keller"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2019-05-18T00:00:00+02:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Déploiement de votre premier site web statique sur IPFS"/> <meta name="twitter:site" content="@bertrandkeller"/> <meta name="twitter:creator" content="@Bertrand Keller"/> <script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://bertrandkeller.info/2019/05/18/deploiement-statique-ipfs/"},"url":"https://bertrandkeller.info/2019/05/18/deploiement-statique-ipfs/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://bertrandkeller.info/assets/bertrandkeller.png"},"name":"Bertrand Keller"},"headline":"Déploiement de votre premier site web statique sur IPFS","dateModified":"2019-05-18T00:00:00+02:00","datePublished":"2019-05-18T00:00:00+02:00","author":{"@type":"Person","name":"Bertrand Keller"},"description":"Traduction de l’article The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS.","@type":"BlogPosting","@context":"https://schema.org"}</script> <meta name="subject" content="Histoire de gestion de contenu, générateur de site internet statique, éco-conception et Low-Tech"> <meta name="generator" content="jekyll v3.9.0"> <meta itemprop="name" content="Déploiement de votre premier site web statique sur IPFS | Bertrand Keller"> <meta itemprop="description" content="Histoire de gestion de contenu, générateur de site internet statique, éco-conception et Low-Tech"> <meta itemprop="image" content="/assets/bertrandkeller.png"> <meta name="robots" content=""> <link rel="preload" href="/assets/css/main.css" as="style" crossorigin=anonymous> <link href="/assets/css/main.css" rel="stylesheet"> <link href="/assets/css/font.css" rel="stylesheet"> <link rel="pingback" href="https://webmention.io/bertrandkeller.info/xmlrpc"/> <link href="https://github.com/bertrandkeller" rel="me"> <script data-no-instant>
    !function(){"use strict";function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e){return window.localStorage&&localStorage.font_css_cache&&localStorage.font_css_cache_file===e}function n(){if(window.localStorage&&window.XMLHttpRequest)if(t(o))c(localStorage.font_css_cache);else{var n=new XMLHttpRequest;n.open("GET",o,!0),e(n,"load",function(){4===n.readyState&&(c(n.responseText),localStorage.font_css_cache=n.responseText,localStorage.font_css_cache_file=o)}),n.send()}else{var a=document.createElement("link");a.href=o,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),document.cookie="font_css_cache";}}function c(e){var t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("html")[0].className+=' font-loaded'}var o="/assets/css/font.css";window.localStorage&&localStorage.font_css_cache||document.cookie.indexOf("font_css_cache")>-1?n():e(window,"load",n)}();

  </script> <link href="/humans.txt" rel="author" type="text/plain"/> <link href="https://bertrandkeller.info/feed/" rel="alternate" type="application/rss+xml" title="✊&nbsp;Bertrand Keller RSS Feed"/> <meta name="google-site-verification" content="TLPgjqS26dGLPiEz9QUF3u5uaTQnvQRAc3HoaRvC_S8"/> <link rel="preconnect" href="https://res.cloudinary.com/"> <link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png"> <link rel="manifest" href="/manifest.webmanifest"> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5"> <meta name="theme-color" content="#000000"> </head> <body class="page" itemscope itemtype="http://schema.org/WebPage"> <div class="skip-links"> <a href="#main">Contenu principal</a> </div> <header class="site-header" role="banner"> <div class="site-header-top site-header-top__align wrapper"> <p class="site-logo"> <a class="site-title" href="/">✊&nbsp;Bertrand Keller</a> </p> <nav class="nav-main nav-main__scroll" role="navigation"> <ul> <li><a class="page-link" href="/archives/" title="">Archives</a></li> <li><a class="page-link" href="/conseil-prestation-formation/" title="Développeur responsable sites Internet - Jekyll/Hugo/Eleventy/Nuxt - Low-Tech & éco-conception">Prestations</a></li> <li><a class="page-link" href="/site-internet-conference-rouen/" title="Intégrateur / développeur - générateur de sites internet statiques, déclinaison HTML/CSS à Rouen, Low-Tech et éco-conception">Portfolio</a></li> </ul> </nav> </div> </header> <main id="main" role="main"> <div class="wrapper"> <article class="post"> <h1 class="post-title">Déploiement de votre premier site web statique sur IPFS</h1> <p class="post-meta"> 18 mai 2019 </p> <p>Traduction de l’article <a href="https://medium.com/interplanetary-gatsby/the-complete-beginners-guide-to-deploying-your-first-static-website-to-ipfs-103b27e8822e">The Complete Beginner’s Guide to Deploying Your First Static Website to IPFS</a>.</p> <p>Pour cet article&#8239;? Parce que le web est centralisé à travers de grandes plateformes&#8239;; que cette centralisation permet de contrôler les flux, des contrôler les gens et de les taxer. Le web consiste à permettre le libre échange citoyen.</p> <p>Vous n’avez besoin de rien savoir sur IPFS ou sur le « web distribué », pas même les générateurs de sites statiques. La première étape consiste à ouvrir votre terminal et à taper ceci dans:</p> <div class="language-bash highlighter-rouge"><div class="highlight"> <pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> dwebsite/public
<span class="nb">cd </span>dwebsite
<span class="nb">echo</span> <span class="s1">'&lt;h1&gt;Hello, worlds!&lt;/h1&gt;'</span> <span class="o">&gt;&gt;</span> public/index.html

yarn global add @agentofuser/ipfs-deploy
ipd
</code></pre> </div></div> <p>Maintenant, asseyez-vous et observez les logs.</p> <div class="language-bash highlighter-rouge"><div class="highlight"> <pre class="highlight"><code>ℹ 🤔 No path argument specified. Looking <span class="k">for </span>common ones... 
✔ 📂 Found <span class="nb">local </span>public directory. Deploying that. 
✔ 🚚 public weighs 24 B. 
✔ 📌 It’s pinned to Infura now with <span class="nb">hash</span>: 
ℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY 
✔ 📋 Copied HTTP gateway URL to clipboard: 
ℹ 🔗 https://ipfs.infura.io/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY 
✔ 🏄 Opened web browser <span class="o">(</span>call with <span class="nt">-O</span> to disable.<span class="o">)</span>
</code></pre> </div></div> <p>Et voilà. Votre propre l33t <a href="https://twitter.com/search?q=%23dweb">#dwebsite</a> (The Decentralized Web) en ligne sur le réseau <a href="https://cloudflare-ipfs.com/ipfs/QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY">Merkleverse</a>.</p> <h2 id="quest-ce-qui-vient-de-se-passer">Qu’est-ce qui vient de se passer?</h2> <p>Pas évident à comprendre en une fois. Revenons un peu en arrière et regardons-le au ralenti, avec quelques commentaires&nbsp;:</p> <h3 id="1-où-ça-se-passe-">1. Où ça se passe&#8239;?</h3> <p>À vrai dire, j’aurais pu appeler <code>ipd ./public</code>, en passant le répertoire à déployer (public) explicitement.</p> <p>Mais alors, vous ne verriez pas l’emoji 🤔 comme une sonde ipfs-deploy pour l’une des nombreuses destinations, souvent non documentées, de <a href="https://github.com/agentofuser/ipfs-deploy/blob/8023d82b5df68076ca79bc684f45ea64e5e67c06/index.js#L75">construction habituellement utilisées par les générateurs de sites statiques</a>.</p> <div class="language-bash highlighter-rouge"><div class="highlight"> <pre class="highlight"><code>ℹ 🤔 No path argument specified. Looking <span class="k">for </span>common ones... 
✔ 📂 Found <span class="nb">local </span>public directory. Deploying that.
</code></pre> </div></div> <p>Oui, j’ai en fait passé au peigne fin le site <a href="https://staticgen.com">staticgen.com</a>, installé plusieurs de ces générateurs de sites statiques et créé de petits sites de test afin de pouvoir appliquer ce titre «&#8239;zéro configuration&#8239;».</p> <p>C’est ce que recherche <em>ipfs-deploy</em> vous éviter de le taper&nbsp;:</p> <div class="language-bash highlighter-rouge"><div class="highlight"> <pre class="highlight"><code>const guesses <span class="o">=</span> <span class="o">[</span>
  <span class="s1">'_site'</span>,         // jekyll, hakyll, eleventy
  <span class="s1">'site'</span>,          // forgot which
  <span class="s1">'public'</span>,        // gatsby, hugo
  <span class="s1">'dist'</span>,          // nuxt
  <span class="s1">'output'</span>,        // pelican
  <span class="s1">'out'</span>,           // hexo
  <span class="s1">'build'</span>,         // metalsmith, middleman
  <span class="s1">'website/build'</span>, // docusaurus
  <span class="s1">'docs'</span>,          // many others
<span class="o">]</span>
</code></pre> </div></div> <p>Comme vous pouvez le voir avec le nom de cette publication, je suis un fan de Gatsby, mais <em>ipfs-deploy</em> sert tous ceux qui en ont besoin. Apportez votre propre SSG (Générateur de site statique), nous lâcherons un jetpack interplanétaire sur notre dos et le ferons voler. 🚀</p> <h3 id="2-le-téléchargement">2. Le téléchargement</h3> <p>C’est la raison pour laquelle nous sommes ici, c’est-à-dire placer le site web dans l’espace (au figuré, pour le moment). Donc, quelques secondes plus tard, <em>ipfs-deploy</em> fournit:</p> <div class="language-bash highlighter-rouge"><div class="highlight"> <pre class="highlight"><code>✔ 📌 It’s pinned to Infura now with <span class="nb">hash</span>:
ℹ 🔗 QmQzKWGdjjQeTXrruYL2vLkCqRP8TyXnG1a9QEJjDM8WTY
</code></pre> </div></div> <p>Victoire !</p> <p>Cette petite génération/diffusion d’un <a href="https://multiformats.io/multihash/">hash</a> est le nœud de tout le judo #dweb (The Decentralized Web). La formule magique qui appelle votre site Web depuis les profondeurs caverneuses des donjons connectés, sans se soucier de savoir où il se trouve, mais seulement de savoir de quoi il retourne.</p> <p><strong>Un adressage intrinsèque, non lié par la localisation ou la route.</strong></p> <p>Bienvenue <attitude grave=""> dans le futur distribué.</attitude></p> <h2 id="attendez-une-minute-je-pensais-vous-avoir-entendu-dire-distribué">Attendez une minute, je pensais vous avoir entendu dire «&#8239;distribué&#8239;»</h2> <p>Oh, lecteur perspicace.</p> <p>Vous avez raison&nbsp;: si IPFS est censé être un protocole poste à poste (pair à pair), pourquoi télécharge-t-on tout de même l’ensemble du site, n’est-ce pas&#8239;? Pour un serveur !?</p> <p>Ne devrions-nous pas simplement annoncer au réseau que nous avons le hachage et ensuite attendre de le servir nous-mêmes à d’autres pairs à la demande&#8239;?</p> <p>Oui, vous pouvez faire ça. Ensuite, vous fermez votre ordinateur portable, le wifi diminue, 💩 arrive, et pouf ✨, votre site web disparaît.</p> <p>Cela ressemble aux torrents&nbsp;: il faut au moins un semeur (personne qui possède une copie complète du fichier partagé sur le réseau torrent.) pour que le contenu soit accessible. Si votre site web compte des tonnes de personnes qui exécutent leur propre nœud IPFS et le ré-servent à d’autres, votre temps de disponibilité sera en moyenne assez élevé.</p> <p>Mais il n’y a pas encore beaucoup de visiteurs de ce type (espérons-le, <a href="https://brave.com/">Brave</a> réglera ce problème pour nous) et, en plus, c’est un tout nouveau site web !</p> <p>Ce serait une autre histoire si les navigateurs avaient un <a href="https://twitter.com/search?q=%23asyncUX">#asyncUX</a> décent et que les visiteurs pouvaient facilement leur dire de mettre le téléchargement en file d’attente lorsqu’un homologue est disponible, puis de l’avertir lorsqu’il était prêt (comme un flux continu « à lire plus tard »).</p> <p>Mais dans l’état actuel des choses, s’il n’y a personne pour servir votre contenu au moment où une demande est faite, la situation est en suspend. Vous n’êtes donc pas <a href="https://interplanetarygatsby.com/foreword/">prêt pour l’espace</a>.</p> <p>Nous avons donc besoin d’un semoir à haute disponibilité de notre côté. Ou, dans le jargon IPFS, un « pinner » (éplinglage garantissant que les objets sont conservés dans le stockage local du noeud).</p> <h2 id="zero-config-pinning-avec-infuraio">Zero-Config Pinning avec Infura.io</h2> <p>L’objectif principal de <em>ipfs-deploy</em> est de vous permettre de vivre une première expérience heureuse consistant à voir quelque chose que vous avez créé sur IPFS le plus rapidement possible.</p> <p>Une façon de le faire consiste à exécuter un démon IPFS local et rendre disponible le contenu vous-même.</p> <p>Mais comme nous l’avons vu plus haut, ce serait un peu ridicule car cela ne représente pas ce à quoi un déploiement réel que vous pouvez partager avec vos amis pourrait ressembler. Je dois avoir un pinner stable.</p> <p>Bien épingler avec un temps de disponibilité décent coûte de l’argent, alors la plupart des services d’épinglage exigent naturellement que vous vous inscriviez au moins à un niveau gratuit avant d’accepter d’héberger votre site web.</p> <p>Pas <a href="https://infura.io/docs/ipfs/get/block_get.md">Infura.io</a> !</p> <p>Par magie de la limitation prudente des taux, de la prévention intelligente des abus, du capital de croissance ou de l’abandon téméraire, ils vous permettent de télécharger des éléments à l’abri, <a href="https://community.infura.io/t/how-often-do-you-garbage-collect-files-on-your-ipfs-node-and-how-long-will-a-file-persist-after-upload/44/2">sans authentification</a>, et ils vous le serviront indéfiniment. (Même contre votre volonté semble-t-il, car il n’y a pas de moyen clair de détacher les choses pour le moment.)</p> <p>Nous devons donc cette possibilité à leur simple générosité&nbsp;: merci à Infura, et continuez comme ça !</p> <p>De plus, si vous possédez vous-même un service d’épinglage et que vous souhaitez faire partie du paquet de bienvenue de zéro-configuration, envisagez d’ajouter un niveau « encore plus libre » qui ne nécessite pas d’inscription.</p> <p>Les sites web statiques nouvellement créés ne prennent pas beaucoup de place, ont très peu de trafic et constituent une excellente passerelle pour une consommation accrue d’IPFS.</p> <p>Vous n’avez pas seulement déployé votre premier site web IPFS, mais vous pouvez maintenant vous vanter de bien comprendre son fonctionnement en agitant les mains et en disant « Oh, c’est un peu comme git + bittorrent »</p> <p>Alors, <a href="https://github.com/agentofuser/ipfs-deploy/issues/new">dites-moi ce qui ne va pas</a> et je vais régler le problème pour vous.</p> </article> <nav class="pagination--prevnext" role="navigation"> <div class="pagination--prev"> <a class="pagination--item" href="/2019/05/15/web-responsabilite/"> Ce que nous détruisons, notre responsabilité&#8239;? </a> </div> <div class="pagination--next"> <a class="pagination--item" href="/2019/06/05/integrateur-paysan/"> Intégrateur paysan </a> </div> </nav> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "item": {
        "@id": "/2019/",
        "name": "2019"
      }
    },{
      "@type": "ListItem",
      "position": 2,
      "item": {
        "@id": "/2019/05/",
        "name": "05"
      }
    },{
      "@type": "ListItem",
      "position": 3,
      "item": {
        "@id": "/2019/05/18/",
        "name": "18"
      }
    },{
      "@type": "ListItem",
      "position": 3,
      "item": {
        "@id": "/2019/05/18/deploiement-statique-ipfs/",
        "name": "Déploiement de votre premier site web statique sur IPFS"
      }
    }]
  }
</script> </div> </main> <script data-no-instant>
		if (navigator.serviceWorker) {
		  window.addEventListener('load', function () {
		    if (navigator.serviceWorker.controller) {
		      //navigator.serviceWorker.controller.postMessage({'command': 'trimCaches'});
		    } else {
		      navigator.serviceWorker.register('/sw.js', {
		        scope: '/'
		      });
		    }
		  });
		}
</script> </body> </html>