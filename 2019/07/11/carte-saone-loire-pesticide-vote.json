{ "id": "/2019/07/11/carte-saone-loire-pesticide-vote", "title": "Carte relation entre pesticide et vote aux élections européennes en Saône-et-Loire", "url": "https://bertrandkeller.info/2019/07/11/carte-saone-loire-pesticide-vote/", "date": 1562796000, "html": "<p>La cartographie est quand même un métier compliqué, on pense pouvoir faire une belle représentation avant de se rendre compte que les données qu’on possède ne sont pas exploitables dans l’état.</p>\n\n<h2 id=\"mon-exercice\">Mon exercice</h2>\n\n<p>Je voulais savoir si finalement les élections n’était pas souvent l’occasion d’affirmer une sorte de défense des acquis. Alors bien évidemment, c’est sûrement en partie le cas, c‘est un truisme.</p>\n\n<p>Mediapart vient de publier une carte de l’utilisation des pesticides en France. <a href=\"https://mediapart.carto.com/viz/bc7dc11b-7e49-44db-91c7-c966da09c437/embed_map\">Quantités de substances pesticides achetées par des professionnels en 2017</a>. Ce qu’ils notent c’est que le gouvernement ne joue pas le jeu, car il ne publie pas la liste (complète ?) des organismes qui achètent ce genre de substance (surtour qu’ils n’indique pas leur nom). Alors ils ont trouvé des données, je ne sais pas vraiment où, mais ils ont trouvé.</p>\n\n<p>Sur le site data.gouv, on trouve aussi des données, mais le fichier est assez succinct et pas vraiment optimisé (date de 2017). Il liste les communes où ont été acheté des produits pas où ils ont été utilisés. Je m’en suis quand même servi juste pour optimiser mon script.</p>\n\n<h2 id=\"ma-mthodologie\">Ma méthodologie</h2>\n\n<p>C’est la première fois que j’utilisais des fichiers geojson. Ce sont des fichiers qui répertorient les contours de zones géographiques officielles. L’affichage de zones géographiques peut être plus pertinent que des points (marqueurs) car il permet de voir s’il y a des continuités entre territoires.</p>\n\n<p>Donc pour faire le rapprochement entre les eléctions européennes 2019 et la carte des pesticides, c’est un peu lourd.</p>\n\n<p>En effet, il faut compiler plusieurs fichiers de dizaines de milliers de villes : les résultats des élections par communes, le fichier geojson par communes, un 2ème geojson au cas où la commune n’existe pas dans le premier, la position du centre d‘une zone par commune… et le fichier listant la vente de pesticides.</p>\n\n<p>Pour que ça marche, il faut utiliser une référence identique du type le “code insee” mais qui n’est pas forcément indiqué dans tous les fichiers.</p>\n\n<p>Pour compilé tout ça j’ai utilisé <a href=\"https://gohugo.io/\">goHugo</a>. Et bien quand on dit que Hugo est puissant, c’est le cas de le dire. Je mets moins de 2 minutes à compiler ces milliers de données. C’est beaucoup, mais faut voir la masse.</p>\n\n<p>Je suis plutôt content du résultat car le temps de compilation reste correct par rapport au nombre de points que je peux afficher sur une page web (Si trop de points, la carte devient trop lourde à charger pour l’utilisateur)</p>\n\n<h2 id=\"rsultat\">Résultat</h2>\n\n<p>Le résultat c’est cette carte.</p>\n\n<p><img src=\"https://res.cloudinary.com/dou0m7u5s/image/upload/v1562860044/carto-election-pesticide-saone-loire.png\" alt=\"carte pesticide Saone et Loire\"/></p>\n\n<p>Tout d’abord, je ne sais pas si mon fichier sur l’achat de pesticides est complet. Ensuite, je ne sais où sont répandu les pesticides.</p>\n\n<p>On devine vaguement que les zones avec un contour plus fort (communes qui ont acheté des pesticides) ont le plus souvent un fond bleu (très fort vote à droite). Mais il y en a aussi avec un fond vert clair.</p>\n\n<p>Cette carte ne prouve pas grand chose. Mais c’est instructif.</p>\n\n<h2 id=\"conclusion\">Conclusion</h2>\n\n<p>Je me suis amusé à mettre en place de la cartographie très puissante avec goHugo. Cet outil est vraiment pratique pour manipuler des JSON avec beaucoup d’entrées.</p>\n\n<p>Quand je vois les cartes pondues par les services presses de différents journaux, je me dis que ce que j’ai fait est quand même plus lisible.</p>\n\n<p>Sur la carte de Mediapart, on peut voir des zones colorées par code postal (pas par commune) et on ne peut pas voir vraiment où on se situe en France (il n’y a pas de carte de fond). Du coup je ne vois pas à quoi ça sert pour de l’analyse un peu poussée.</p>\n\n<p>Les journalistes ont utilisé un service en ligne pratique, certes, mais qui ne permet pas d’analyser la données qu’ils ont mis tant de temps à collecter.</p>\n", "markdown": "La cartographie est quand même un métier compliqué, on pense pouvoir faire une belle représentation avant de se rendre compte que les données qu’on possède ne sont pas exploitables dans l’état.\n\n## Mon exercice\n\nJe voulais savoir si finalement les élections n'était pas souvent l’occasion d’affirmer une sorte de défense des acquis. Alors bien évidemment, c’est sûrement en partie le cas, c‘est un truisme.\n\nMediapart vient de publier une carte de l'utilisation des pesticides en France. [Quantités de substances pesticides achetées par des professionnels en 2017](https://mediapart.carto.com/viz/bc7dc11b-7e49-44db-91c7-c966da09c437/embed_map). Ce qu'ils notent c'est que le gouvernement ne joue pas le jeu, car il ne publie pas la liste (complète ?) des organismes qui achètent ce genre de substance (surtour qu'ils n'indique pas leur nom). Alors ils ont trouvé des données, je ne sais pas vraiment où, mais ils ont trouvé.\n\nSur le site data.gouv, on trouve aussi des données, mais le fichier est assez succinct et pas vraiment optimisé (date de 2017). Il liste les communes où ont été acheté des produits pas où ils ont été utilisés. Je m’en suis quand même servi juste pour optimiser mon script.\n\n## Ma méthodologie\n\nC'est la première fois que j'utilisais des fichiers geojson. Ce sont des fichiers qui répertorient les contours de zones géographiques officielles. L'affichage de zones géographiques peut être plus pertinent que des points (marqueurs) car il permet de voir s'il y a des continuités entre territoires.\n\nDonc pour faire le rapprochement entre les eléctions européennes 2019 et la carte des pesticides, c’est un peu lourd.\n\nEn effet, il faut compiler plusieurs fichiers de dizaines de milliers de villes : les résultats des élections par communes, le fichier geojson par communes, un 2ème geojson au cas où la commune n'existe pas dans le premier, la position du centre d‘une zone par commune… et le fichier listant la vente de pesticides.\n\nPour que ça marche, il faut utiliser une référence identique du type le \"code insee\" mais qui n'est pas forcément indiqué dans tous les fichiers.\n\nPour compilé tout ça j'ai utilisé [goHugo](https://gohugo.io/). Et bien quand on dit que Hugo est puissant, c'est le cas de le dire. Je mets moins de 2 minutes à compiler ces milliers de données. C'est beaucoup, mais faut voir la masse.\n\nJe suis plutôt content du résultat car le temps de compilation reste correct par rapport au nombre de points que je peux afficher sur une page web (Si trop de points, la carte devient trop lourde à charger pour l’utilisateur)\n\n## Résultat\n\nLe résultat c’est cette carte.\n\n<img src=\"https://res.cloudinary.com/dou0m7u5s/image/upload/v1562860044/carto-election-pesticide-saone-loire.png\" alt=\"carte pesticide Saone et Loire\"/>\n\n\nTout d'abord, je ne sais pas si mon fichier sur l’achat de pesticides est complet. Ensuite, je ne sais où sont répandu les pesticides.\n\nOn devine vaguement que les zones avec un contour plus fort (communes qui ont acheté des pesticides) ont le plus souvent un fond bleu (très fort vote à droite). Mais il y en a aussi avec un fond vert clair.\n\nCette carte ne prouve pas grand chose. Mais c’est instructif.\n\n## Conclusion\n\nJe me suis amusé à mettre en place de la cartographie très puissante avec goHugo. Cet outil est vraiment pratique pour manipuler des JSON avec beaucoup d’entrées.\n\nQuand je vois les cartes pondues par les services presses de différents journaux, je me dis que ce que j'ai fait est quand même plus lisible.\n\nSur la carte de Mediapart, on peut voir des zones colorées par code postal (pas par commune) et on ne peut pas voir vraiment où on se situe en France (il n'y a pas de carte de fond). Du coup je ne vois pas à quoi ça sert pour de l’analyse un peu poussée.\n\nLes journalistes ont utilisé un service en ligne pratique, certes, mais qui ne permet pas d’analyser la données qu'ils ont mis tant de temps à collecter.\n" }